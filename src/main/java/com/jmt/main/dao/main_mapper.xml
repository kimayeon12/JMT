<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jmt.main.dao.MainDAO">
	<select id="lightDto" resultType="main">
		SELECT l.lightning_no
			,l.lightning_title
			,c.class_name
			,l.food_no
		FROM lightningList l
		LEFT OUTER JOIN codeTable c ON c.class_no = l.class_no
		WHERE c.class_no=1 ORDER BY RAND()
		
	</select>
	
	<select id="dojangDto" resultType="main">
		SELECT d.dojang_no
			,d.dojang_title
			,c.class_name
			,d.food_no
		FROM dojangList d
		LEFT OUTER JOIN codeTable c ON c.class_no = d.class_no
		WHERE c.class_no=3 ORDER BY RAND()
	</select>
	
	<select id="resDto" resultType="main">
		SELECT r.restaurant_name
			,r.restaurant_address
			,p.photo_newFileName
		FROM restaurant r
		LEFT OUTER JOIN comment c ON r.restaurant_no = c.idx 
		LEFT OUTER JOIN photo p ON p.idx = c.comment_no 
		JOIN food f ON r.food_no = f.food_no
		WHERE restaurant_info = "영업중"
	</select>
	
	<select id="grDto" resultType="main">
		SELECT g.review_title,g.review_content,m.member_name
			,(SELECT photo_newFileName FROM photo p WHERE p.class_no=9 AND p.idx = (SELECT profile_no FROM profile f WHERE f.member_id =g.member_id)) AS photo_newFileName
		FROM groupReview g
		LEFT OUTER JOIN member m ON g.member_id = m.member_id
	</select>
</mapper>